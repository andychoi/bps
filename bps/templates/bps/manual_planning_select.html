{# manual_planning_select.html #}
{% extends "bps/base.html" %}
{% block content %}
<h2>Select Manual Planning</h2>
<form id="select-form">
  <div class="mb-3">
    <label for="layout" class="form-label">Layout/Year/Version</label>
    <select id="layout" class="form-select">
      {% for ly in layouts %}
      <option value="{{ ly.layout.id }}|{{ ly.year.id }}|{{ ly.version.id }}">
        {{ ly.layout.name }} - {{ ly.year.code }}/{{ ly.version.code }}
      </option>
      {% endfor %}
    </select>
  </div>
  <button class="btn btn-primary">Launch</button>
</form>
<script>
  document.getElementById('select-form').addEventListener('submit', e=>{
    e.preventDefault();
    let [l,y,v] = document.getElementById('layout').value.split('|');
    window.location.href = `{% url 'bps:manual-planning' 0 0 0 %}`
      .replace('/0/0/0/', `/${l}/${y}/${v}/`);
  });
</script>
{% endblock %}
